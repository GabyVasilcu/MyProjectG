<!DOCTYPE html>
<html>

<head>
    <title>AlbNegru</title>
    <script>
        document.addEventListener("DOMContentLoaded", start);

        var canvas;
        var ctx;
        var img = new Image(300, 300);
        var val;

        function start() {
            canvas = document.getElementsByTagName("canvas")[0];
            ctx = canvas.getContext("2d");
            document.body.appendChild(img);
            img.src = "floare.jpg";
            img.addEventListener("load", imgLoad);
        }

        function imgLoad() {
            ctx.drawImage(img, 0, 0, 300, 300);
            var data = ctx.getImageData(0, 0, 300, 300);
            console.log(data);
            for (var i = 0; i < 300 * 300 * 4; i += 4) {
                // val = data.data[i] * 0.3 + data.data[i + 1] * 0.59 + data.data[i + 2] * 0.11;
                val = data.data[i] * 0 + data.data[i + 1] * 0 + data.data[i + 2] * 1;
                data.data[i] = val;
                data.data[i + 1] = val;
                data.data[i + 2] = val;
            }
            ctx.putImageData(data, 0, 0); // trebuie variabila de la getImageData
        }
    </script>
</head>

<body>
    <canvas width="300" height="300"></canvas>
</body>

</html>